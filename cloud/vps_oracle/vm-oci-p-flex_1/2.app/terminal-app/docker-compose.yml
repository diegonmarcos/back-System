version: '3.8'

# Web Terminal (ttyd)
# VM: gcloud-arch-1 (pending)

services:
  terminal-app:
    image: tsl0922/ttyd:latest
    container_name: terminal-app
    restart: unless-stopped
    ports:
      - "7681:7681"
    environment:
      - TTYD_PORT=7681
    command: ttyd -W -t fontSize=14 -t fontFamily="Consolas,Monaco,monospace" bash
    volumes:
      - /home/diego:/home/diego:rw
    networks:
      - bridge
    deploy:
      resources:
        limits:
          memory: 128M
        reservations:
          memory: 64M
    security_opt:
      - no-new-privileges:true

networks:
  bridge:
    name: bridge
    external: true

# Alternative: wetty
# services:
#   terminal-app:
#     image: wettyoss/wetty:latest
#     container_name: terminal-app
#     restart: unless-stopped
#     ports:
#       - "3000:3000"
#     environment:
#       - SSHHOST=localhost
#       - SSHPORT=22
#       - BASE=/wetty/
